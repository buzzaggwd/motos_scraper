# Парсер мощности двигателя мотоциклов
Проект представляет собой набор пауков (spiders) на scrapy для сбора информации о мотоциклах (мощности двигателя) с четырех различных веб-сайтов (bikez.com, fastestlaps.com, japan-webike.nl, motorcyclespecs.co.za). Данные сохраняются в json-файл.

## Цель проекта
Заполнить недостающие данные о мощности (power) для моделей мотоциклов из исходного файла motos.json, используя парсинг нескольких специализированных источников.

## Источники данных
#### BikezSpider (bikez.com):
Ищет модели по году выпуска и названию.
Извлекает мощность двигателя из технических характеристик на странице модели.

#### FastestlapsSpider (fastestlaps.com):
Ищет модели по бренду и названию.
Проверяет, является ли транспортное средство мотоциклом, перед парсингом.

#### WebikeSpider (japan-webike.nl):
Ищет модели по бренду в каталоге магазина.
Парсит страницы с техническими характеристиками и оттуда мощность двигателя.

#### CseSpider (motorcyclespecs.co.za):
Используется для моделей, которые не были найдены на предыдущих сайтах.
Использует playwright для рендеринга js-элементов страницы поиска.
Переходит по первой найденной ссылке и пытается найти мощность двитателя.

## Стек технологий
- Python
- Scrapy
- BeautifulSoup4
- Playwright

## Запуск парсера

Клонируйте репозиторий:

```
git clone https://github.com/buzzaggwd/motos_scraper.git
```

Активируйте виртуальную среду:
```
python -m venv venv
venv\Scripts\activate
```

Установите зависимости:
```
pip install -r requirements.txt
```

Установите браузер для playwright:
```
playwright install chromium
```

Подготовьте исходные данные:

- Убедитесь, что в корне проекта существует файл motos.json со списком моделей мотоциклов, которые нужно обновить.

- Формат файла: список словарей, каждый из которых содержит как минимум ключ "model" с моделью мотоцикла в качестве значения. 

```
[
  {"model": "Honda CBR1000RR"},
  {"model": "Yamaha YZF-R1"},
  ...
]
```
- Мотоциклы могут быть только марок "Honda", "Kawasaki", "Harley-Davidson", "BMW", "Yamaha", "KTM", "Suzuki", "Triumph", "Ducati" или "Buell", иначе поиск будет неэффктивным.

Перейдите в нужную директорию:

```
cd motos_scraper/motos_scraper/spider
```

Запустите парсер:
```
python motos_spider.py
```

## Результаты работы
После завершения работы пауков обновленные данные будут сохранены в файл motos_final.json в корневой директории проекта. В этот файл будут последовательно записываться результаты работы каждого паука.

## Заметки
Логирование: Процесс парсинга подробно логируется в файл scrapy.log в папке spiders (файл появится после запуска проекта). 

Последовательность: Пауки запускаются последовательно (Bikez -> Fastestlaps -> Webike -> CSE). Это сделано для того, чтобы более надежные источники обрабатывались первыми, а более медленный и общий поиск (CseSpider) использовался в последнюю очередь для оставшихся моделей. Если вы хотите запустить какой-либо из пауков отдельно, закомментируйте соответствующие строки в строках 390-396 в файле motos_spider.py.



— buzzaggwd